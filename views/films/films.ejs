<h1 class="mb-4">
  ðŸŽ¬ <%= title %>
  <small class="text-muted d-block fs-6">Beheer je filmcollectie</small>
</h1>

<!-- Zoek & filter sectie -->
<div class="card shadow-sm mb-4">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center flex-wrap">
      <a href="/films/new" class="btn btn-success mb-2" data-cy="add-film">âž• Nieuwe Film</a>

      <form method="get" action="/films" class="d-flex align-items-center flex-wrap mb-2">
        <input type="text" name="q" class="form-control me-2 mb-2"
               placeholder="ðŸ” Zoek films..."
               value="<%= searchQuery %>">

        <div class="form-check me-3 mb-2">
          <input class="form-check-input" type="checkbox" id="available" name="available" value="true"
            onchange="this.form.submit()" <%= filterAvailable ? 'checked' : '' %>>
          <label class="form-check-label" for="available">Alleen beschikbare films</label>
        </div>

        <button type="submit" class="btn btn-primary mb-2">Zoek</button>
      </form>
    </div>
  </div>
</div>

<!-- Film tabel -->
<div class="card border-0 shadow-sm rounded-3 overflow-hidden">
  <div class="card-body p-0">
    <table class="table table-hover mb-0" data-cy="films-table">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Titel</th>
          <th>Jaar</th>
          <th>Beschikbaarheid</th>
          <th class="text-end">Acties</th>
        </tr>
      </thead>
      <tbody>
        <% if (films.length === 0) { %>
          <tr>
            <td colspan="5" class="text-center py-4 text-muted">
              Geen films gevonden ðŸ“­
            </td>
          </tr>
        <% } %>

        <% films.forEach(film => { %>
          <tr>
            <td><%= film.film_id %></td>
            <td><%= film.title %></td>
            <td><%= film.release_year %></td>
            <td>
              <% if (film.available) { %>
                <span class="badge bg-success">âœ” Beschikbaar</span>
              <% } else { %>
                <span class="badge bg-danger">âœ– Uitverkocht</span>
              <% } %>
            </td>
            <td class="text-end">
              <div class="d-inline-flex gap-2">
                <a href="/films/<%= film.film_id %>" class="btn btn-sm btn-primary" data-cy="view-film">
                  Details
                </a>
                <a href="/films/<%= film.film_id %>/edit" class="btn btn-sm btn-warning" data-cy="edit-film">
                  Bewerk
                </a>
                <form method="post" action="/films/<%= film.film_id %>/delete" class="d-inline delete-form">
                  <button type="submit" class="btn btn-sm btn-danger" data-cy="delete-film">
                    Verwijder
                  </button>
                </form>
              </div>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>
