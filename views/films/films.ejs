<h1 class="mb-4"><%= title %></h1>

<!-- Knoppen, zoekbalk en filter -->
<div class="mb-3 d-flex justify-content-between align-items-center flex-wrap">
  <a href="/films/new" class="btn btn-success mb-2">+ Nieuwe Film</a>

  <form method="get" action="/films" class="d-flex align-items-center mb-2 flex-wrap">
    <input type="text" name="q" class="form-control me-2 mb-2" placeholder="Zoek films..." value="<%= searchQuery %>">

    <div class="form-check me-2 mb-2">
      <input class="form-check-input" type="checkbox" id="available" name="available" value="true"
        onchange="this.form.submit()" <%= filterAvailable ? 'checked' : '' %>>
      <label class="form-check-label" for="available">Alleen beschikbare films</label>
    </div>

    <button type="submit" class="btn btn-primary mb-2">Zoek</button>
  </form>
</div>

<table class="table table-striped table-hover">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Titel</th>
      <th>Jaar</th>
      <th>Beschikbaarheid</th>
      <th>Acties</th>
    </tr>
  </thead>
  <tbody>
    <% if (films.length === 0) { %>
      <tr>
        <td colspan="5" class="text-center">Geen films gevonden</td>
      </tr>
    <% } %>

    <% films.forEach(film => { %>
      <tr>
        <td><%= film.film_id %></td>
        <td><%= film.title %></td>
        <td><%= film.release_year %></td>
        <td>
          <% if (film.available) { %>
            <span class="text-success">Beschikbaar</span>
          <% } else { %>
            <span class="text-danger">Uitverkocht</span>
          <% } %>
        </td>
        <td>
          <a href="/films/<%= film.film_id %>" class="btn btn-sm btn-primary">Bekijk</a>
          <a href="/films/<%= film.film_id %>/edit" class="btn btn-sm btn-warning">Bewerk</a>
          <form method="post" action="/films/<%= film.film_id %>/delete" style="display:inline">
            <button type="submit" class="btn btn-sm btn-danger">Verwijder</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>
